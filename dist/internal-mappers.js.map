{"version":3,"sources":["webpack://checkoutKit/webpack/bootstrap","webpack://checkoutKit/external \"tslib\"","webpack://checkoutKit/./src/quote/map-to-internal-quote.ts","webpack://checkoutKit/./src/internal-mappers.ts","webpack://checkoutKit/./src/shipping/map-to-internal-shipping-options.ts","webpack://checkoutKit/./src/cart/map-to-internal-line-items.ts","webpack://checkoutKit/external \"lodash\"","webpack://checkoutKit/./src/cart/map-gift-certificate-to-internal-line-item.ts","webpack://checkoutKit/./src/cart/map-to-internal-line-item.ts","webpack://checkoutKit/./src/cart/map-to-internal-cart.ts","webpack://checkoutKit/./src/promotion/map-to-discount-notifications.ts","webpack://checkoutKit/./src/shipping/map-to-internal-shipping-option.ts","webpack://checkoutKit/./src/customer/map-to-internal-customer.ts","webpack://checkoutKit/./src/cart/amount-transformer.ts","webpack://checkoutKit/./src/coupon/map-to-internal-coupon.ts","webpack://checkoutKit/./src/coupon/map-to-internal-gift-certificate.ts","webpack://checkoutKit/./src/order/map-to-internal-order.ts","webpack://checkoutKit/./src/address/map-to-internal-address.ts","webpack://checkoutKit/./src/billing/is-billing-address-like.ts","webpack://checkoutKit/./src/payment/payment-method-types.ts","webpack://checkoutKit/./src/common/selector/cache-key-resolver.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","mapToInternalQuote","checkout","shippingAddress","consignment","consignments","orderComment","customerMessage","shippingOption","selectedShippingOption","id","undefined","billingAddress","map_to_internal_address","__webpack_exports__","selector","mapToInternalShippingOptions","reduce","result","shippingOptions","availableShippingOptions","length","external_tslib_","_a","map","option","selectedOptionId","map_to_internal_shipping_option","mapToInternalLineItems","itemMap","decimalPlaces","idKey","keys","concat","item","_map_gift_certificate_to_internal_line_item__WEBPACK_IMPORTED_MODULE_0__","_map_to_internal_line_item__WEBPACK_IMPORTED_MODULE_1__","type","mapToInternalLineItemType","mapGiftCertificateToInternalLineItem","amountTransformer","___WEBPACK_IMPORTED_MODULE_0__","imageUrl","amount","amountAfterDiscount","discount","integerAmount","toInteger","integerAmountAfterDiscount","integerDiscount","quantity","sender","recipient","attributes","variantId","mapToInternalLineItem","extendedListPrice","extendedSalePrice","discountAmount","downloadsPageUrl","downloadPageUrl","options","mapToInternalCart","cart","currency","amount_transformer","items","map_to_internal_line_items","lineItems","code","coupon","discountedAmount","external_lodash_","coupons","sum","map_to_internal_coupon","discountNotifications","promotions","notifications","forEach","promotion","banners","banner","push","placeholders","discountType","message","messageHtml","text","mapToDiscountNotifications","giftCertificate","totalDiscountedAmount","giftCertificates","certificate","used","appliedGiftCertificates","map_to_internal_gift_certificate","shipping","shippingCostTotal","amountBeforeDiscount","shippingCostBeforeDiscount","integerAmountBeforeDiscount","required","physicalItems","lineItem","isShippingRequired","subtotal","storeCredit","customer","taxSubtotal","taxTotal","taxes","handling","handlingCostTotal","grandTotal","mapToInternalShippingOption","isSelected","description","price","cost","selected","isRecommended","transitTime","mapToInternalCustomer","firstName","lastName","addresses","address","_address__WEBPACK_IMPORTED_MODULE_0__","customerId","isGuest","email","fullName","join","AmountTransformer","_dp","this","Math","floor","pow","mapToInternalCoupon","couponTypes","displayName","indexOf","couponType","mapToInternalGiftCertificate","remainingBalance","remaining","balance","purchaseDate","mapToInternalOrder","order","orderMeta","_cart__WEBPACK_IMPORTED_MODULE_1__","orderId","_cart__WEBPACK_IMPORTED_MODULE_2__","customerCanBeCreated","payment","payments","lodash__WEBPACK_IMPORTED_MODULE_0__","isDefaultOrderPayment","providerId","status","mapToInternalPaymentStatus","detail","step","helpText","instructions","returnUrl","mapToInteralOrderPayment","baseAmount","_coupon__WEBPACK_IMPORTED_MODULE_3__","token","orderToken","callbackUrl","mapToGiftCertificates","socialData","socialDataObject","digitalItems","socialMedia","find","image","url","link","shareText","sharingLink","channelName","channel","channelCode","mapToInternalSocialData","mapToInternalSocialDataList","hasDigitalItems","isDownloadable","isComplete","mapToStoreCredit","orderAmount","orderAmountAsInteger","mapToInternalAddress","addressId","isBillingAddressLike","company","addressLine1","address1","addressLine2","address2","city","province","stateOrProvince","provinceCode","stateOrProvinceCode","postCode","postalCode","country","countryCode","phone","customFields","HOSTED","OFFLINE","CacheKeyResolver","_lastId","_maps","getKey","args","_i","arguments","_resolveMap","apply","index","parentMaps","cacheKey","usedCount","_generateKey","slice","getUsedCount","isMatched","parentMaps_1","maps"],"mappings":"2BACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,uBClFAhC,EAAAD,QAAAkC,QAAA,iTCKc,SAAAC,EAA6BC,EAAoBC,GAC3D,IAAMC,EAAcF,EAASG,cAAgBH,EAASG,aAAa,GAEnE,OACIC,aAAcJ,EAASK,gBACvBC,eAAgBJ,GAAeA,EAAYK,uBAAyBL,EAAYK,uBAAuBC,QAAKC,EAC5GC,eAAgBV,EAASU,eAAiBlC,OAAAmC,EAAA,EAAAnC,CAAqBwB,EAASU,mBACxET,gBAAiBA,GAAmBzB,OAAAmC,EAAA,EAAAnC,CAAqByB,EAAiBD,EAASG,0nBCZ3FzC,EAAAU,EAAAwC,EAAA,qCAAAC,EAAA,uICIc,SAAAC,EAAuCX,GACjD,OAAOA,EAAaY,OAAO,SAACC,EAAQd,SAC5Be,EAQJ,OANIf,EAAYgB,0BAA4BhB,EAAYgB,yBAAyBC,OAC7EF,EAAkBf,EAAYgB,yBACvBhB,EAAYK,yBACnBU,GAAmBf,EAAYK,yBAGnCa,EAAA,YACOJ,IAAMK,MACRnB,EAAYM,KAAMS,OAAuBK,IAAI,SAAAC,GAC1C,IAAMC,EAAmBtB,EAAYK,wBAA0BL,EAAYK,uBAAuBC,GAElG,OAAOhC,OAAAiD,EAAA,EAAAjD,CACH+C,EACAA,EAAOf,KAAOgB,KAEpBH,gKCjBA,SAAAK,EACVC,EACAC,EACAC,GAEA,YAFA,IAAAA,MAAA,MAEQrD,OAAOsD,KAAKH,GACfZ,OAAO,SAACC,EAAQ3B,GAAQ,OAClB2B,EAAMe,OACLJ,EAAQtC,GAAoBiC,IAAI,SAACU,GACjC,MAAY,qBAAR3C,EACOb,OAAAyD,EAAA,EAAAzD,CAAqCwD,EAAMJ,GAG/CpD,OAAA0D,EAAA,EAAA1D,CACHwD,EASpB,SAAmCG,GAC/B,OAAQA,GACJ,IAAK,gBACD,MAAO,qBAEX,IAAK,eACD,MAAO,oBAEX,IAAK,mBACD,MAAO,4BAEX,QACI,MAAO,IApBCC,CAA0B/C,GAC1BuC,EACAC,6BCvBpBhE,EAAAD,QAAAkC,QAAA,sKCKc,SAAAuC,EACVL,EACAJ,GAEA,IAAMU,EAAoB,IAAIC,EAAA,EAAkBX,GAEhD,OACIpB,GAAIwB,EAAKxB,GACTgC,SAAU,GACVnE,KAAM2D,EAAK3D,KACXoE,OAAQT,EAAKS,OACbC,oBAAqBV,EAAKS,OAC1BE,SAAU,EACVC,cAAeN,EAAkBO,UAAUb,EAAKS,QAChDK,2BAA4BR,EAAkBO,UAAUb,EAAKS,QAC7DM,gBAAiB,EACjBC,SAAU,EACVC,OAAQjB,EAAKiB,OACbC,UAAWlB,EAAKkB,UAChBf,KAAM,4BACNgB,cACAC,UAAW,oFCrBL,SAAAC,EACVrB,EACAG,EACAP,EACAC,QAAA,IAAAA,MAAA,MAEA,IAAMS,EAAoB,IAAIC,EAAA,EAAkBX,GAEhD,OACIpB,GAAKwB,EAAKH,GACVW,SAAUR,EAAKQ,SACfC,OAAQT,EAAKsB,kBACbZ,oBAAqBV,EAAKuB,kBAC1BZ,SAAUX,EAAKwB,eACfZ,cAAeN,EAAkBO,UAAUb,EAAKsB,mBAChDR,2BAA4BR,EAAkBO,UAAUb,EAAKuB,mBAC7DR,gBAAiBT,EAAkBO,UAAUb,EAAKwB,gBAClDC,iBAAmBzB,EAAqB0B,gBACxCrF,KAAM2D,EAAK3D,KACX2E,SAAUhB,EAAKgB,SACfI,UAAWpB,EAAKoB,UAChBD,YAAanB,EAAK2B,aAAerC,IAAI,SAAAC,GAAU,OAC3ClD,KAAMkD,EAAOlD,KACbU,MAAOwC,EAAOxC,SAElBoD,KAAIA,oFCpBE,SAAAyB,EAA4B5D,GACtC,IAAM4B,EAAgB5B,EAAS6D,KAAKC,SAASlC,cACvCU,EAAoB,IAAIyB,EAAA,EAAkBnC,GAEhD,OACIpB,GAAIR,EAAS6D,KAAKrD,GAClBwD,MAAOxF,OAAAyF,EAAA,EAAAzF,CAAuBwB,EAAS6D,KAAKK,UAAWtC,GACvDkC,SAAU9D,EAAS6D,KAAKC,SAASK,KACjCC,QACIC,iBAAkB7F,OAAA8F,EAAA,OAAA9F,CAAOwB,EAAS6D,KAAKU,QAAS,SAACC,EAAKJ,GAClD,OAAOI,EAAMJ,EAAOC,kBACrB,GACHE,QAASvE,EAAS6D,KAAKU,QAAQjD,IAAImD,EAAA,IAEvC9B,UACIF,OAAQzC,EAAS6D,KAAKL,eACtBZ,cAAeN,EAAkBO,UAAU7C,EAAS6D,KAAKL,iBAE7DkB,sBCxBM,SAAqCC,GAC/C,IAAMC,KAaN,OAXCD,OAAkBE,QAAQ,SAAAC,IACtBA,EAAUC,aAAeF,QAAQ,SAAAG,GAC9BJ,EAAcK,MACVC,gBACAC,aAAc,KACdC,QAAS,GACTC,YAAaL,EAAOM,WAKzBV,EDUoBW,CAA2BvF,EAAS2E,YAC3Da,iBACIC,sBAAuBjH,OAAA8F,EAAA,OAAA9F,CAAOwB,EAAS0F,iBAAkB,SAAClB,EAAKmB,GAC3D,OAAOnB,EAAMmB,EAAYC,MAC1B,GACHC,wBAAyBrH,OAAA8F,EAAA,MAAA9F,CAAMwB,EAAS0F,iBAAiBpE,IAAIwE,EAAA,GAA+B,SAEhGC,UACItD,OAAQzC,EAASgG,kBACjBpD,cAAeN,EAAkBO,UAAU7C,EAASgG,mBACpDC,qBAAsBjG,EAASkG,2BAC/BC,4BAA6B7D,EAAkBO,UAAU7C,EAASkG,4BAClEE,SAAU5H,OAAA8F,EAAA,KAAA9F,CAAKwB,EAAS6D,KAAKK,UAAUmC,cAAe,SAAAC,GAAY,OAAAA,EAASC,sBAE/EC,UACI/D,OAAQzC,EAASwG,SACjB5D,cAAeN,EAAkBO,UAAU7C,EAASwG,WAExDC,aACIhE,OAAQzC,EAAS0G,SAAW1G,EAAS0G,SAASD,YAAc,GAEhEE,aACIlE,OAAQzC,EAAS4G,SACjBhE,cAAeN,EAAkBO,UAAU7C,EAAS4G,WAExDC,MAAO7G,EAAS6G,MAChBD,UACInE,OAAQzC,EAAS4G,SACjBhE,cAAeN,EAAkBO,UAAU7C,EAAS4G,WAExDE,UACIrE,OAAQzC,EAAS+G,kBACjBnE,cAAeN,EAAkBO,UAAU7C,EAAS+G,oBAExDC,YACIvE,OAAQzC,EAASgH,WACjBpE,cAAeN,EAAkBO,UAAU7C,EAASgH,+EE7DlD,SAAAC,EAAsC1F,EAAwB2F,GACxE,OACIC,YAAa5F,EAAO4F,YACpBtJ,OAAQ0D,EAAOY,KACfiF,MAAO7F,EAAO8F,KACd7G,GAAIe,EAAOf,GACX8G,SAAUJ,EACVK,cAAehG,EAAOgG,cACtB/E,SAAUjB,EAAOiB,SACjBgF,YAAajG,EAAOiG,0HCNd,SAAAC,EAAgCf,EAAoBhG,GAC9D,IAAMgH,EAAYhB,EAASgB,WAAahH,EAAegH,WAAa,GAC9DC,EAAWjB,EAASiB,UAAYjH,EAAeiH,UAAY,GAEjE,OACIC,WAAYlB,EAASkB,eAAiBtG,IAAI,SAAAuG,GAAW,OAAArJ,OAAAsJ,EAAA,EAAAtJ,CAAqBqJ,KAC1EE,WAAYrB,EAASlG,GACrBwH,QAAStB,EAASsB,QAClBvB,YAAaC,EAASD,YACtBwB,MAAOvB,EAASuB,OAASvH,EAAeuH,OAAS,GACjDP,UAASA,EACTC,SAAQA,EACRtJ,KAAMqI,EAASwB,WAAaR,EAAWC,GAAUQ,KAAK,wCClB9D,IAAAC,EAAA,WACI,SAAAA,EAAoBC,GAAAC,KAAAD,MAKxB,OAHID,EAAA1I,UAAAmD,UAAA,SAAUJ,GACN,OAAO8F,KAAKC,MAAM/F,EAAS8F,KAAKE,IAAI,GAAIH,KAAKD,OAErDD,EANA,0CCGA1K,EAAAU,EAAAwC,EAAA,sBAAA8H,IAAA,IAAMC,GACF,oBACA,sBACA,qBACA,oBACA,iBAGU,SAAAD,EAA8BtE,GACxC,OACID,KAAMC,EAAOD,KACbxB,SAAUyB,EAAOwE,YACjBzD,aAAcwD,EAAYE,QAAQzE,EAAO0E,+CCZnC,SAAAC,EAAuCvD,GACjD,OACIrB,KAAMqB,EAAgBrB,KACtBE,iBAAkBmB,EAAgBI,KAClCoD,iBAAkBxD,EAAgByD,UAClCzD,iBACI0D,QAAS1D,EAAgB0D,QACzB/E,KAAMqB,EAAgBrB,KACtBgF,aAAc3D,EAAgB2D,yJCC5B,SAAAC,EAA6BC,EAAcC,QAAA,IAAAA,UACrD,IAAM1H,EAAgByH,EAAMvF,SAASlC,cAC/BU,EAAoB,IAAIiH,EAAA,EAAkB3H,GAEhD,OACIpB,GAAI6I,EAAMG,QACVxF,MAAOxF,OAAAiL,EAAA,EAAAjL,CAAuB6K,EAAMnF,UAAWmF,EAAMvF,SAASlC,cAAe,aAC7E4H,QAASH,EAAMG,QACf1F,SAAUuF,EAAMvF,SAASK,KACzBuF,qBAAsBL,EAAMK,qBAC5BC,QAuFR,SAAkCC,EAA0BD,QAAA,IAAAA,UACxD,IAAM3H,EAAOxD,OAAAqL,EAAA,KAAArL,CAAKoL,EAAUE,GAE5B,IAAK9H,EACD,SAGJ,OACIxB,GAAIwB,EAAK+H,WACTC,OAAQC,EAA2BjI,EAAKkI,OAAOC,MAC/CC,SAAUpI,EAAKkI,OAAOG,aACtBC,UAAWX,EAAQW,WAlGVC,CAAyBlB,EAAMO,SAAUN,EAAUK,SAC5DnD,UACI/D,OAAQ4G,EAAMmB,WACd5H,cAAeN,EAAkBO,UAAUwG,EAAMmB,aAErDpG,QACIC,iBAAkB7F,OAAAqL,EAAA,OAAArL,CAAO6K,EAAM9E,QAAS,SAACC,EAAKJ,GAC1C,OAAOI,EAAMJ,EAAOC,kBACrB,GACHE,QAAS8E,EAAM9E,QAAQjD,IAAImJ,EAAA,IAE/B9H,UACIF,OAAQ4G,EAAM7F,eACdZ,cAAeN,EAAkBO,UAAUwG,EAAM7F,iBAErDkH,MAAOpB,EAAUqB,WACjBC,YAAatB,EAAUsB,YACvBlG,yBACAc,gBAmDR,SAA+BoE,GAC3B,IAAM5F,EAAQxF,OAAAqL,EAAA,OAAArL,CAAOoL,GAAYG,WAAY,oBAE7C,OACItE,sBAAuBjH,OAAAqL,EAAA,OAAArL,CAAOwF,EAAO,SAACQ,EAAKxC,GAAS,OAAAA,EAAKS,OAAS+B,GAAK,GACvEqB,wBAAyBrH,OAAAqL,EAAA,MAAArL,CAAMwF,EAAM1C,IAAI,SAAAU,GAAQ,OAC7CmC,KAAMnC,EAAKkI,OAAO/F,KAClBE,iBAAkBrC,EAAKS,OACvBuG,iBAAkBhH,EAAKkI,OAAOjB,UAC9BzD,iBACI0D,QAASlH,EAAKS,OAAST,EAAKkI,OAAOjB,UACnC9E,KAAMnC,EAAKkI,OAAO/F,KAClBgF,aAAc,OAEjB,SAjEY0B,CAAsBxB,EAAMO,UAC7CkB,WAuFR,SAAqCzB,GACjC,IAAM0B,KAUN,OARO1B,EAAMnF,UAAUmC,cAAatE,OAC7BsH,EAAMnF,UAAU8G,cAGjBnG,QAAQ,SAAA7C,GACV+I,EAAiB/I,EAAKxB,IAM9B,SAAiC8F,GAG7B,OAFe,KAAM,KAAM,MAEdvF,OAAO,SAAC+J,EAAY3G,GAC7B,IAAMnC,EAAOsE,EAAS2E,aAAe3E,EAAS2E,YAAYC,KAAK,SAAAlJ,GAAQ,OAAAA,EAAKmC,OAASA,IAErF,OAAKnC,GAIL8I,EAAW3G,IACP9F,KAAMiI,EAASjI,KACf8I,YAAab,EAASjI,KACtB8M,MAAO7E,EAAS9D,SAChB4I,IAAKpJ,EAAKqJ,KACVC,UAAWtJ,EAAKsD,KAChBiG,YAAavJ,EAAKqJ,KAClBG,YAAaxJ,EAAKyJ,QAClBC,YAAa1J,EAAKmC,MAGf2G,GAdIA,OAbiBa,CAAwB3J,KAGjD+I,EAlGSa,CAA4BvC,GACxCW,OAAQX,EAAMW,OACd6B,gBAAiBxC,EAAMwC,gBACvBC,eAAgBzC,EAAMyC,eACtBC,WAAY1C,EAAM0C,WAClBhG,UACItD,OAAQ4G,EAAMrD,kBACdpD,cAAeN,EAAkBO,UAAUwG,EAAMrD,mBACjDC,qBAAsBoD,EAAMnD,2BAC5BC,4BAA6B7D,EAAkBO,UAAUwG,EAAMnD,6BAEnEO,aACIhE,OAgCZ,SAA0BmH,GACtB,IAAM5H,EAAOxD,OAAAqL,EAAA,KAAArL,CAAKoL,GAAYG,WAAY,gBAE1C,OAAO/H,EAAOA,EAAKS,OAAS,EAnCZuJ,CAAiB3C,EAAMO,WAEnC/C,MAAOwC,EAAMxC,MACbC,UACIrE,OAAQ4G,EAAMtC,kBACdnE,cAAeN,EAAkBO,UAAUwG,EAAMtC,oBAErDC,YACIvE,OAAQ4G,EAAM4C,YACdrJ,cAAeyG,EAAM6C,uBAmBjC,SAAAjC,EAAoCD,GAChC,MAAO,kBAAkBA,EA0C7B,SAAAF,EAA+BH,GAC3B,MAA8B,oBAAvBA,EAAQI,YAA2D,gBAAvBJ,EAAQI,6CCtHjD,SAAAoC,EAA+BtE,EAAmC1H,GAC5E,IAAIiM,EAQJ,OCZU,SAA+BvE,GAGzC,YAAoC,IAFbA,EAEMrH,GDGzB6L,CAAqBxE,GAEd1H,GAAgBA,EAAagB,SACpCiL,EAAYjM,EAAa,GAAGK,IAF5B4L,EAAYvE,EAAQrH,IAMpBA,GAAI4L,EACJ1E,UAAWG,EAAQH,UACnBC,SAAUE,EAAQF,SAClB2E,QAASzE,EAAQyE,QACjBC,aAAc1E,EAAQ2E,SACtBC,aAAc5E,EAAQ6E,SACtBC,KAAM9E,EAAQ8E,KACdC,SAAU/E,EAAQgF,gBAClBC,aAAcjF,EAAQkF,oBACtBC,SAAUnF,EAAQoF,WAClBC,QAASrF,EAAQqF,QACjBC,YAAatF,EAAQsF,YACrBC,MAAOvF,EAAQuF,MACfC,aAAcxF,EAAQwF,6NE9BvB,IAAMC,EAAS,sBACTC,EAAU,wDCDvB,IAAAC,EAAA,oBAAAA,IACYlF,KAAAmF,QAAU,EACVnF,KAAAoF,SAyEZ,OAvEIF,EAAA9N,UAAAiO,OAAA,eAAO,IAAAC,KAAAC,EAAA,EAAAA,EAAAC,UAAA3M,OAAA0M,IAAAD,EAAAC,GAAAC,UAAAD,GACG,IAAAxM,EAAAiH,KAAAyF,YAAAC,MAAA1F,KAAAsF,GAAEK,EAAA5M,EAAA4M,MAAO3M,EAAAD,EAAAC,IAAK4M,EAAA7M,EAAA6M,WAEpB,OAAI5M,GAAOA,EAAI6M,UACX7M,EAAI8M,YAEG9M,EAAI6M,UAGR7F,KAAK+F,aAAaH,EAAYN,EAAKU,MAAML,KAGpDT,EAAA9N,UAAA6O,aAAA,eAAa,IAAAX,KAAAC,EAAA,EAAAA,EAAAC,UAAA3M,OAAA0M,IAAAD,EAAAC,GAAAC,UAAAD,GACD,IAAAvM,EAAAgH,KAAAyF,YAAAC,MAAA1F,KAAAsF,GAAAtM,IAER,OAAOA,EAAMA,EAAI8M,UAAY,GAGzBZ,EAAA9N,UAAAqO,YAAR,eAAoB,IAAAH,KAAAC,EAAA,EAAAA,EAAAC,UAAA3M,OAAA0M,IAAAD,EAAAC,GAAAC,UAAAD,GAIhB,IAHA,IAAII,EAAQ,EACRC,EAAa5F,KAAKoF,MAEfQ,EAAW/M,QAAQ,CAGtB,IAFA,IAAIqN,GAAY,EAEEnN,EAAA,EAAAoN,EAAAP,EAAA7M,EAAAoN,EAAAtN,OAAAE,IAAY,CAAzB,IAAMC,EAAGmN,EAAApN,GACV,GAAIC,EAAIvC,QAAU6O,EAAKK,GAAvB,CAIA,IAAqB,IAAhBL,EAAKzM,QAAgB8M,IAAUL,EAAKzM,OAAS,IAAMG,EAAI6M,SACxD,OAASF,MAAKA,EAAE3M,IAAGA,EAAE4M,WAAUA,GAGnCM,GAAY,EACZN,EAAa5M,EAAIoN,KACjBT,IAEA,OAGJ,IAAKO,EACD,MAIR,OAASP,MAAKA,EAAEC,WAAUA,IAGtBV,EAAA9N,UAAA2O,aAAR,SAAqBK,EAAqBd,GACtC,IAEItM,EAFA2M,EAAQ,EACRC,EAAaQ,EAGjB,GACIpN,GACI8M,UAAW,EACXrP,MAAO6O,EAAKK,GACZS,SAGJR,EAAWjJ,KAAK3D,GAEhB4M,EAAa5M,EAAIoN,KACjBT,UACKA,EAAQL,EAAKzM,QAItB,OAFAG,EAAI6M,SAAW,MAAK7F,KAAKmF,QAElBnM,EAAI6M,UAEnBX,EA3EA","file":"internal-mappers.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 120);\n","module.exports = require(\"tslib\");","import { mapToInternalAddress, Address, InternalAddress } from '../address';\nimport { Checkout } from '../checkout';\n\nimport InternalQuote from './internal-quote';\n\nexport default function mapToInternalQuote(checkout: Checkout, shippingAddress?: Address): InternalQuote {\n    const consignment = checkout.consignments && checkout.consignments[0];\n\n    return {\n        orderComment: checkout.customerMessage,\n        shippingOption: consignment && consignment.selectedShippingOption ? consignment.selectedShippingOption.id : undefined,\n        billingAddress: checkout.billingAddress ? mapToInternalAddress(checkout.billingAddress) : {} as InternalAddress,\n        shippingAddress: shippingAddress && mapToInternalAddress(shippingAddress, checkout.consignments),\n    };\n}\n","/**\n * Please note that these mappers are for internal use only. DO NOT USE. They\n * can be removed or changed at any time.\n */\nexport { mapToInternalAddress } from './address';\nexport { mapToInternalCart } from './cart';\nexport { mapToInternalCoupon, mapToInternalGiftCertificate } from './coupon';\nexport { mapToInternalCustomer } from './customer';\nexport { mapToInternalLineItem, mapToInternalLineItems } from './cart';\nexport { mapToInternalOrder } from './order';\nexport { mapToInternalQuote } from './quote';\nexport { mapToInternalShippingOption, mapToInternalShippingOptions } from './shipping';\nexport { CacheKeyResolver } from './common/selector';\n","import Consignment from './consignment';\nimport { InternalShippingOptionList } from './internal-shipping-option';\nimport mapToInternalShippingOption from './map-to-internal-shipping-option';\n\nexport default function mapToInternalShippingOptions(consignments: Consignment[]): InternalShippingOptionList {\n    return consignments.reduce((result, consignment) => {\n        let shippingOptions;\n\n        if (consignment.availableShippingOptions && consignment.availableShippingOptions.length) {\n            shippingOptions = consignment.availableShippingOptions;\n        } else if (consignment.selectedShippingOption) {\n            shippingOptions = [consignment.selectedShippingOption];\n        }\n\n        return {\n            ...result,\n            [consignment.id]: (shippingOptions || []).map(option => {\n                const selectedOptionId = consignment.selectedShippingOption && consignment.selectedShippingOption.id;\n\n                return mapToInternalShippingOption(\n                    option,\n                    option.id === selectedOptionId\n                );\n            }),\n        };\n    }, {});\n}\n","import InternalLineItem from './internal-line-item';\nimport { LineItem } from './line-item';\nimport LineItemMap from './line-item-map';\nimport mapGiftCertificateToInternalLineItem from './map-gift-certificate-to-internal-line-item';\nimport mapToInternalLineItem from './map-to-internal-line-item';\n\nexport default function mapToInternalLineItems(\n    itemMap: LineItemMap,\n    decimalPlaces: number,\n    idKey: keyof LineItem = 'id'\n): InternalLineItem[] {\n    return (Object.keys(itemMap) as Array<keyof LineItemMap>)\n        .reduce((result, key) => [\n            ...result,\n            ...(itemMap[key] as LineItem[]).map((item: any) => {\n                if (key === 'giftCertificates') {\n                    return mapGiftCertificateToInternalLineItem(item, decimalPlaces);\n                }\n\n                return mapToInternalLineItem(\n                    item,\n                    mapToInternalLineItemType(key),\n                    decimalPlaces,\n                    idKey\n                );\n            }),\n        ], [] as InternalLineItem[]);\n}\n\nfunction mapToInternalLineItemType(type: string): string {\n    switch (type) {\n        case 'physicalItems':\n            return 'ItemPhysicalEntity';\n\n        case 'digitalItems':\n            return 'ItemDigitalEntity';\n\n        case 'giftCertificates':\n            return 'ItemGiftCertificateEntity';\n\n        default:\n            return '';\n    }\n}\n","module.exports = require(\"lodash\");","import InternalLineItem from './internal-line-item';\nimport { GiftCertificateItem } from './line-item';\n\nimport { AmountTransformer } from '.';\n\nexport default function mapGiftCertificateToInternalLineItem(\n    item: GiftCertificateItem,\n    decimalPlaces: number\n): InternalLineItem {\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: item.id,\n        imageUrl: '',\n        name: item.name,\n        amount: item.amount,\n        amountAfterDiscount: item.amount,\n        discount: 0,\n        integerAmount: amountTransformer.toInteger(item.amount),\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.amount),\n        integerDiscount: 0,\n        quantity: 1,\n        sender: item.sender,\n        recipient: item.recipient,\n        type: 'ItemGiftCertificateEntity',\n        attributes: [],\n        variantId: null,\n    };\n}\n","import InternalLineItem from './internal-line-item';\nimport { DigitalItem, LineItem } from './line-item';\n\nimport { AmountTransformer } from '.';\n\nexport default function mapToInternalLineItem(\n    item: LineItem,\n    type: string,\n    decimalPlaces: number,\n    idKey: keyof LineItem = 'id'\n): InternalLineItem {\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: (item[idKey] as string | number),\n        imageUrl: item.imageUrl,\n        amount: item.extendedListPrice,\n        amountAfterDiscount: item.extendedSalePrice,\n        discount: item.discountAmount,\n        integerAmount: amountTransformer.toInteger(item.extendedListPrice),\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.extendedSalePrice),\n        integerDiscount: amountTransformer.toInteger(item.discountAmount),\n        downloadsPageUrl: (item as DigitalItem).downloadPageUrl,\n        name: item.name,\n        quantity: item.quantity,\n        variantId: item.variantId,\n        attributes: (item.options || []).map(option => ({\n            name: option.name,\n            value: option.value,\n        })),\n        type,\n    };\n}\n","import { keyBy, reduce, some } from 'lodash';\n\nimport { Checkout } from '../checkout';\nimport { mapToInternalCoupon, mapToInternalGiftCertificate } from '../coupon';\nimport { mapToDiscountNotifications } from '../promotion';\n\nimport { AmountTransformer } from '.';\nimport InternalCart from './internal-cart';\nimport mapToInternalLineItems from './map-to-internal-line-items';\n\nexport default function mapToInternalCart(checkout: Checkout): InternalCart {\n    const decimalPlaces = checkout.cart.currency.decimalPlaces;\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: checkout.cart.id,\n        items: mapToInternalLineItems(checkout.cart.lineItems, decimalPlaces),\n        currency: checkout.cart.currency.code,\n        coupon: {\n            discountedAmount: reduce(checkout.cart.coupons, (sum, coupon) => {\n                return sum + coupon.discountedAmount;\n            }, 0),\n            coupons: checkout.cart.coupons.map(mapToInternalCoupon),\n        },\n        discount: {\n            amount: checkout.cart.discountAmount,\n            integerAmount: amountTransformer.toInteger(checkout.cart.discountAmount),\n        },\n        discountNotifications: mapToDiscountNotifications(checkout.promotions),\n        giftCertificate: {\n            totalDiscountedAmount: reduce(checkout.giftCertificates, (sum, certificate) => {\n                return sum + certificate.used;\n            }, 0),\n            appliedGiftCertificates: keyBy(checkout.giftCertificates.map(mapToInternalGiftCertificate), 'code'),\n        },\n        shipping: {\n            amount: checkout.shippingCostTotal,\n            integerAmount: amountTransformer.toInteger(checkout.shippingCostTotal),\n            amountBeforeDiscount: checkout.shippingCostBeforeDiscount,\n            integerAmountBeforeDiscount: amountTransformer.toInteger(checkout.shippingCostBeforeDiscount),\n            required: some(checkout.cart.lineItems.physicalItems, lineItem => lineItem.isShippingRequired),\n        },\n        subtotal: {\n            amount: checkout.subtotal,\n            integerAmount: amountTransformer.toInteger(checkout.subtotal),\n        },\n        storeCredit: {\n            amount: checkout.customer ? checkout.customer.storeCredit : 0,\n        },\n        taxSubtotal: {\n            amount: checkout.taxTotal,\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\n        },\n        taxes: checkout.taxes,\n        taxTotal: {\n            amount: checkout.taxTotal,\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\n        },\n        handling: {\n            amount: checkout.handlingCostTotal,\n            integerAmount: amountTransformer.toInteger(checkout.handlingCostTotal),\n        },\n        grandTotal: {\n            amount: checkout.grandTotal,\n            integerAmount: amountTransformer.toInteger(checkout.grandTotal),\n        },\n    };\n}\n","import { DiscountNotification } from '../discount';\n\nimport { Promotion } from '.';\n\nexport default function mapToDiscountNotifications(promotions?: Promotion[]): DiscountNotification[] {\n    const notifications: DiscountNotification[] = [];\n\n    (promotions || []).forEach(promotion => {\n        (promotion.banners || []).forEach(banner => {\n            notifications.push({\n                placeholders: [],\n                discountType: null,\n                message: '',\n                messageHtml: banner.text,\n            });\n        });\n    });\n\n    return notifications;\n}\n","import InternalShippingOption from './internal-shipping-option';\nimport ShippingOption from './shipping-option';\n\nexport default function mapToInternalShippingOption(option: ShippingOption, isSelected: boolean): InternalShippingOption {\n    return {\n        description: option.description,\n        module: option.type,\n        price: option.cost,\n        id: option.id,\n        selected: isSelected,\n        isRecommended: option.isRecommended,\n        imageUrl: option.imageUrl,\n        transitTime: option.transitTime,\n    };\n}\n","import { mapToInternalAddress } from '../address';\nimport { BillingAddress } from '../billing';\n\nimport { Customer } from '.';\nimport InternalCustomer from './internal-customer';\n\nexport default function mapToInternalCustomer(customer: Customer, billingAddress: BillingAddress): InternalCustomer {\n    const firstName = customer.firstName || billingAddress.firstName || '';\n    const lastName = customer.lastName || billingAddress.lastName || '';\n\n    return {\n        addresses: (customer.addresses || []).map(address => mapToInternalAddress(address)),\n        customerId: customer.id,\n        isGuest: customer.isGuest,\n        storeCredit: customer.storeCredit,\n        email: customer.email || billingAddress.email || '',\n        firstName,\n        lastName,\n        name: customer.fullName || [firstName, lastName].join(' '),\n    };\n}\n","export default class AmountTransformer {\n    constructor(private _dp: number) {}\n\n    toInteger(amount: number): number {\n        return Math.floor(amount * Math.pow(10, this._dp));\n    }\n}\n","import Coupon from './coupon';\nimport InternalCoupon from './internal-coupon';\n\nconst couponTypes = [\n    'per_item_discount',\n    'percentage_discount',\n    'per_total_discount',\n    'shipping_discount',\n    'free_shipping',\n];\n\nexport default function mapToInternalCoupon(coupon: Coupon): InternalCoupon {\n    return {\n        code: coupon.code,\n        discount: coupon.displayName,\n        discountType: couponTypes.indexOf(coupon.couponType),\n    };\n}\n","import GiftCertificate from './gift-certificate';\nimport InternalGiftCertificate from './internal-gift-certificate';\n\nexport default function mapToInternalGiftCertificate(giftCertificate: GiftCertificate): InternalGiftCertificate {\n    return {\n        code: giftCertificate.code,\n        discountedAmount: giftCertificate.used,\n        remainingBalance: giftCertificate.remaining,\n        giftCertificate: {\n            balance: giftCertificate.balance,\n            code: giftCertificate.code,\n            purchaseDate: giftCertificate.purchaseDate,\n        },\n    };\n}\n","import { filter, find, keyBy, reduce } from 'lodash';\n\nimport { AmountTransformer, LineItem } from '../cart';\nimport { mapToInternalLineItems } from '../cart';\nimport { Checkout } from '../checkout';\nimport { mapToInternalCoupon } from '../coupon';\nimport { HOSTED } from '../payment';\n\nimport InternalOrder, { InternalGiftCertificateList, InternalIncompleteOrder, InternalOrderPayment, InternalSocialDataList } from './internal-order';\nimport Order, { GatewayOrderPayment, GiftCertificateOrderPayment, OrderPayment, OrderPayments } from './order';\nimport { OrderMetaState } from './order-state';\n\nexport default function mapToInternalOrder(order: Order, orderMeta: OrderMetaState = {}): InternalOrder {\n    const decimalPlaces = order.currency.decimalPlaces;\n    const amountTransformer = new AmountTransformer(decimalPlaces);\n\n    return {\n        id: order.orderId,\n        items: mapToInternalLineItems(order.lineItems, order.currency.decimalPlaces, 'productId'),\n        orderId: order.orderId,\n        currency: order.currency.code,\n        customerCanBeCreated: order.customerCanBeCreated,\n        payment: mapToInteralOrderPayment(order.payments, orderMeta.payment),\n        subtotal: {\n            amount: order.baseAmount,\n            integerAmount: amountTransformer.toInteger(order.baseAmount),\n        },\n        coupon: {\n            discountedAmount: reduce(order.coupons, (sum, coupon) => {\n                return sum + coupon.discountedAmount;\n            }, 0),\n            coupons: order.coupons.map(mapToInternalCoupon),\n        },\n        discount: {\n            amount: order.discountAmount,\n            integerAmount: amountTransformer.toInteger(order.discountAmount),\n        },\n        token: orderMeta.orderToken,\n        callbackUrl: orderMeta.callbackUrl,\n        discountNotifications: [],\n        giftCertificate: mapToGiftCertificates(order.payments),\n        socialData: mapToInternalSocialDataList(order),\n        status: order.status,\n        hasDigitalItems: order.hasDigitalItems,\n        isDownloadable: order.isDownloadable,\n        isComplete: order.isComplete,\n        shipping: {\n            amount: order.shippingCostTotal,\n            integerAmount: amountTransformer.toInteger(order.shippingCostTotal),\n            amountBeforeDiscount: order.shippingCostBeforeDiscount,\n            integerAmountBeforeDiscount: amountTransformer.toInteger(order.shippingCostBeforeDiscount),\n        },\n        storeCredit: {\n            amount: mapToStoreCredit(order.payments),\n        },\n        taxes: order.taxes,\n        handling: {\n            amount: order.handlingCostTotal,\n            integerAmount: amountTransformer.toInteger(order.handlingCostTotal),\n        },\n        grandTotal: {\n            amount: order.orderAmount,\n            integerAmount: order.orderAmountAsInteger,\n        },\n    };\n}\n\nexport function mapToInternalIncompleteOrder(checkout: Checkout): InternalIncompleteOrder {\n    const payment = find(checkout.payments, { providerType: HOSTED });\n\n    return {\n        orderId: null,\n        isComplete: false,\n        payment: !payment ? {} : {\n            id: payment.providerId,\n            gateway: payment.gatewayId,\n            status: mapToInternalPaymentStatus(payment.detail.step),\n        },\n    };\n}\n\nfunction mapToInternalPaymentStatus(status: string): string {\n    return `PAYMENT_STATUS_${status}`;\n}\n\nfunction mapToStoreCredit(payments?: OrderPayments): number {\n    const item = find(payments, { providerId: 'storecredit' });\n\n    return item ? item.amount : 0;\n}\n\nfunction mapToGiftCertificates(payments?: OrderPayments): InternalGiftCertificateList {\n    const items = filter(payments, { providerId: 'giftcertificate' }) as GiftCertificateOrderPayment[];\n\n    return {\n        totalDiscountedAmount: reduce(items, (sum, item) => item.amount + sum, 0),\n        appliedGiftCertificates: keyBy(items.map(item => ({\n            code: item.detail.code,\n            discountedAmount: item.amount,\n            remainingBalance: item.detail.remaining,\n            giftCertificate: {\n                balance: item.amount + item.detail.remaining,\n                code: item.detail.code,\n                purchaseDate: '',\n            },\n        })), 'code'),\n    };\n}\n\nfunction mapToInteralOrderPayment(payments?: OrderPayments, payment: InternalOrderPayment = {}): InternalOrderPayment {\n    const item = find(payments, isDefaultOrderPayment) as GatewayOrderPayment;\n\n    if (!item) {\n        return {};\n    }\n\n    return {\n        id: item.providerId,\n        status: mapToInternalPaymentStatus(item.detail.step),\n        helpText: item.detail.instructions,\n        returnUrl: payment.returnUrl,\n    };\n}\n\nfunction isDefaultOrderPayment(payment: OrderPayment): payment is GatewayOrderPayment {\n    return payment.providerId !== 'giftcertificate' && payment.providerId !== 'storecredit';\n}\n\nfunction mapToInternalSocialDataList(order: Order): { [itemId: string]: InternalSocialDataList } | undefined {\n    const socialDataObject: { [itemId: string]: InternalSocialDataList } = {};\n    const items = [\n        ...order.lineItems.physicalItems,\n        ...order.lineItems.digitalItems,\n    ];\n\n    items.forEach(item => {\n        socialDataObject[item.id] = mapToInternalSocialData(item);\n    });\n\n    return socialDataObject;\n}\n\nfunction mapToInternalSocialData(lineItem: LineItem): InternalSocialDataList {\n    const codes = ['fb', 'tw', 'gp'];\n\n    return codes.reduce((socialData, code) => {\n        const item = lineItem.socialMedia && lineItem.socialMedia.find(item => item.code === code);\n\n        if (!item) {\n            return socialData;\n        }\n\n        socialData[code] = {\n            name: lineItem.name,\n            description: lineItem.name,\n            image: lineItem.imageUrl,\n            url: item.link,\n            shareText: item.text,\n            sharingLink: item.link,\n            channelName: item.channel,\n            channelCode: item.code,\n        };\n\n        return socialData;\n    }, {} as InternalSocialDataList);\n}\n","import { isBillingAddressLike } from '../billing';\nimport BillingAddress from '../billing/billing-address';\nimport { Consignment } from '../shipping';\n\nimport Address from './address';\nimport InternalAddress from './internal-address';\n\nexport default function mapToInternalAddress(address: Address | BillingAddress, consignments?: Consignment[]): InternalAddress {\n    let addressId;\n\n    if (isBillingAddressLike(address)) {\n        addressId = address.id;\n    } else if (consignments && consignments.length) {\n        addressId = consignments[0].id;\n    }\n\n    return {\n        id: addressId,\n        firstName: address.firstName,\n        lastName: address.lastName,\n        company: address.company,\n        addressLine1: address.address1,\n        addressLine2: address.address2,\n        city: address.city,\n        province: address.stateOrProvince,\n        provinceCode: address.stateOrProvinceCode,\n        postCode: address.postalCode,\n        country: address.country,\n        countryCode: address.countryCode,\n        phone: address.phone,\n        customFields: address.customFields,\n    };\n}\n","import Address from '../address/address';\n\nimport BillingAddress from './billing-address';\n\nexport default function isBillingAddressLike(address: Address): address is BillingAddress {\n    const billingAddress = address as BillingAddress;\n\n    return typeof billingAddress.id !== 'undefined';\n}\n","export const HOSTED = 'PAYMENT_TYPE_HOSTED';\nexport const OFFLINE = 'PAYMENT_TYPE_OFFLINE';\n","export default class CacheKeyResolver {\n    private _lastId = 0;\n    private _maps: CacheKeyMap[] = [];\n\n    getKey(...args: any[]): string {\n        const { index, map, parentMaps } = this._resolveMap(...args);\n\n        if (map && map.cacheKey) {\n            map.usedCount++;\n\n            return map.cacheKey;\n        }\n\n        return this._generateKey(parentMaps, args.slice(index));\n    }\n\n    getUsedCount(...args: any[]): number {\n        const { map } = this._resolveMap(...args);\n\n        return map ? map.usedCount : 0;\n    }\n\n    private _resolveMap(...args: any[]): ResolveResult {\n        let index = 0;\n        let parentMaps = this._maps;\n\n        while (parentMaps.length) {\n            let isMatched = false;\n\n            for (const map of parentMaps) {\n                if (map.value !== args[index]) {\n                    continue;\n                }\n\n                if ((args.length === 0 || index === args.length - 1) && map.cacheKey) {\n                    return { index, map, parentMaps };\n                }\n\n                isMatched = true;\n                parentMaps = map.maps;\n                index++;\n\n                break;\n            }\n\n            if (!isMatched) {\n                break;\n            }\n        }\n\n        return { index, parentMaps };\n    }\n\n    private _generateKey(maps: CacheKeyMap[], args: any[]): string {\n        let index = 0;\n        let parentMaps = maps;\n        let map!: CacheKeyMap;\n\n        do {\n            map = {\n                usedCount: 1,\n                value: args[index],\n                maps: [],\n            };\n\n            parentMaps.push(map);\n\n            parentMaps = map.maps;\n            index++;\n        } while (index < args.length);\n\n        map.cacheKey = `${++this._lastId}`;\n\n        return map.cacheKey;\n    }\n}\n\ninterface CacheKeyMap {\n    maps: CacheKeyMap[];\n    value: any;\n    usedCount: number;\n    cacheKey?: string;\n}\n\ninterface ResolveResult {\n    index: number;\n    parentMaps: CacheKeyMap[];\n    map?: CacheKeyMap;\n}\n"],"sourceRoot":""}